##  单例模式（Singleton Pattern）

单例模式（Singleton Pattern）是一种创建型设计模式，

它的核心思想是：
**确保一个类在全局范围内只有一个实例，并提供一个全局访问点。**

就像你家的 Wi-Fi 路由器：整个家里只有一个在工作，大家都用它上网，避免多台乱抢信道。

### 一、单例模式的定义

目的：**保证在内存中某个类只有一个对象实例，且提供统一的访问入口。**

关键点：
1. 构造方法私有化（防止外部随意创建）
2. 在类内部创建唯一实例
3. 对外提供静态方法（或属性）获取实例

### 优点

1. **唯一性： 单例模式确保了类的实例是唯一的**。这对于管理共享资源（如数据库连接、线程池、日志记录器）非常有用，可以避免因多个实例而产生冲突或不一致。

2. **全局访问：状态统一**，它提供了一个全局访问点，让程序中的任何部分都能轻松地获取到这个唯一的实例，而不需要通过参数传递。
3. 资源节约： 由于只创建了一个实例，**可以避免重复创建对象所带来的内存和性能开销**，尤其是在创建对象成本很高的情况下。


## 缺点：

1. 违反单一职责原则：单例类既负责管理自身的实例，又承担业务逻辑，职责过于集中。
2. 隐藏依赖关系：通过全局访问点获取实例，可能会隐藏代码中的依赖关系，使代码可读性和可维护性下降。
3. 不利于测试：单例的全局状态可能会影响测试的独立性，一个测试用例对单例状态的修改可能会影响其他测试用例。
4. 扩展性差：由于单例类的实例是固定的，在需要多个实例的场景下，修改单例类的代码可能会比较复杂。
5. 线程安全问题：在多线程环境下，如果实现不当，可能会导致创建多个实例，需要额外的措施来保证线程安全。

## 适合解决的问题：
1. 资源共享场景：如数据库连接池、线程池、缓存等，这些资源需要被多个部分共享，且创建和销毁的成本较高，使用单例模式可以保证资源的高效利用。
2. 全局配置对象：应用程序的配置信息通常需要在整个程序中被访问，使用单例模式可以确保配置的一致性和唯一性。
3. 日志记录器：日志记录器需要在程序的各个地方记录日志，单例模式可以保证日志的统一管理和输出。
4. 设备管理器：对于计算机中的某些硬件设备（如打印机、显卡等），通常只能有一个管理器来控制，单例模式可以满足这种需求。

## 在 Objective-C 中，单例模式应用非常广泛：

系统框架中的单例
Apple 很多系统框架都使用单例模式，例如：

1. [UIApplication sharedApplication]整个应用的唯一实例，管理应用生命周期、窗口、事件等全局状态。
2. [NSUserDefaults standardUserDefaults]全局唯一的用户偏好设置管理器，用于读写应用配置。
3. [NSNotificationCenter defaultCenter]全局通知中心，负责应用内组件间的消息传递。
4. [NSFileManager defaultManager]文件系统管理的单例，提供统一的文件操作接口。

