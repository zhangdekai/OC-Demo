##  组合模式（Composite Pattern）

组合模式（Composite Pattern） 是一种结构型设计模式，

**用来将对象组合成树形结构以表示部分-整体（Part-Whole）层次关系，使客户端对单个对象和组合对象的使用具有一致性。**

通俗点说：它让“单个元素”和“元素的组合”用相同的方式操作，这样客户端不需要关心它处理的是一个叶子节点还是一棵子树。

### 一、核心思想
定义一个统一接口（Component），既可以表示叶子对象（Leaf），也可以表示容器对象（Composite）。
容器对象可以包含其他的 Component（无论是叶子还是容器），从而形成树形结构。
客户端在使用时，对待单个对象和组合对象是一样的。

### 二、优点

1. 统一接口：叶子节点和组合节点拥有一致的接口，客户端无需区分 “部分” 和 “整体”，可以统一处理单个对象或组合对象。
2. 扩展性强：新增叶子节点或组合节点时，无需修改现有代码，只需扩展新的组件类，符合 “开闭原则”。
3. 树形结构灵活：通过组合模式可以轻松构建复杂的树形结构，且节点之间的关系可以动态调整。

### 三、 缺点

1. 设计复杂度提高：需要定义抽象组件、叶子节点和组合节点，增加了类的数量和系统的抽象程度。
2. 递归逻辑风险：如果树形结构过深，可能导致递归调用层级过多，引发栈溢出等问题（需合理控制树的深度）。
3. 限制类型灵活性：如果需要限制组合节点中只能包含特定类型的叶子节点，实现起来会比较复杂。

### 四、适合的场景

组合模式适用于需要表示 “部分 - 整体” 关系，且希望对单个对象和组合对象进行统一处理的场景

表示树形结构的数据：
1. 文件系统（文件/文件夹）
2. UI 组件（按钮、容器、窗口）
3. 组织结构（员工/部门）
4. 游戏场景（单个元素/组合元素）
5. 需要让客户端忽略单个对象和组合对象的区别，统一处理。
6. 需要递归处理的场景：当需要对层级结构进行递归操作（如遍历、统计、计算总和等）时，
组合模式可以简化逻辑

**在 Objective-C 中，组合模式的应用非常广泛:**

1. UIKit 中的视图层级（UIView 体系）
UIKit 中最经典的组合模式应用就是 UIView 及其子类的层级结构：
UIView, UILabel, UIButton,UIScrollView
[superView addSubview: childView];
2. CALayer 层级结构
与 UIKit 对应，Core Animation 中的 CALayer 体系也采用了组合模式：(同UIview) 
3. 文件系统相关 APi
操作文件系统的 API 也隐含组合模式思想, NSFileManager

 
## 总结
组合模式通过抽象 **“部分” 和 “整体” 的共性，实现了对树形结构的统一处理，核心价值在于简化客户端操作并提高系统扩展性。它特别适合处理具有层级关系的 “部分 - 整体” 结构，是构建灵活、可扩展树形系统的重要手段。**

代码说明

1. 抽象组件（FileSystemComponent）：
* 定义了文件系统组件的共同接口（显示信息、计算大小）
* 是文件和文件夹的父类

2. 叶子节点（File）：
* 表示单个文件，实现了具体的显示和大小计算方法
* 没有子组件，不需要实现添加 / 移除组件的方法

3. 组合节点（Folder）：
* 表示文件夹，可以包含其他文件或文件夹
* 实现了添加、移除子组件的方法
* 通过递归方式计算总大小和显示所有子组件

4. 客户端使用：
* 可以统一处理文件和文件夹，无需区分类型
* 调用相同的方法（displayWithIndent: 和 size）处理整体和部分
