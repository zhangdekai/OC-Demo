## 原型模式

原型模式：用原型实例指定创建对象的种类，并且通过拷贝这些原型，创建新的对象。

原型模式（Prototype Pattern）是一种创建型设计模式，它的核心思想是：
* 通过复制（克隆）已有对象来创建新对象，而不是通过 new 创建。

它适合在对象创建成本高，或者对象结构复杂但变化不大的时候使用。
当对象的创建过程复杂（如需要大量初始化操作、依赖外部资源等）时，原型模式可以简化创建流程，提高效率，同时避免重复的初始化逻辑。

在 Objective-C 中，原型模式通常通过实现 NSCopying 协议（浅复制）或 NSMutableCopying 协议（深复制）来实现，核心是重写 copyWithZone: 方法（或 mutableCopyWithZone:），定义对象的复制规则。


### 优点
1. 提高性能，减少开销
 对象创建可能涉及复杂计算、数据库查询、文件读取等，用克隆可以直接复制已有对象，省下构造成本。
2. 隐藏创建细节
客户端无需知道对象是怎么构造的，只需要拿到一个原型然后复制即可。
3. 动态添加/删除属性更灵活
在运行时可以基于原型对象创建不同的变种，减少类数量。
4. 简化对象创建流程
特别适合复杂对象的初始化，比如游戏角色、UI 元素模板等。

### 缺点
深拷贝和浅拷贝的复杂性
如果对象内部有引用类型，必须考虑深拷贝，否则复制的对象可能会共享引用，导致数据污染。
实现成本高（当对象很复杂时）
每个类都要实现 clone() 方法，有时要手动处理对象图中的引用。
不适合变化特别多的对象
如果原型对象频繁变化，维护成本高，还可能导致克隆结果不可预测。

### 什么时候选择原型模式

你可以用下面的判断逻辑来考虑是否用原型模式：

1. 对象创建开销很大
例如需要多次从数据库加载、做复杂计算、从网络下载数据。
例子：游戏中一个怪物对象包含大量纹理和配置数据，直接克隆比重新加载快很多。
2. 对象类型在运行时才确定
事先不知道具体要创建哪种对象，但可以从一个已存在的对象复制得到。
3. 需要避免暴露构造细节
例如你不希望外部代码直接 new 某个对象（因为初始化步骤太复杂或有安全限制）。
4. 需要生成多个相似对象
例如 UI 组件模板、表单字段配置、关卡地图模板。
