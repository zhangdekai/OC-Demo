#  适配器模式 Adapter

适配器模式（Adapter Pattern）是一种结构型设计模式，
**它的作用是把一个类的接口转换成客户端所期望的另一个接口，从而让原本接口不兼容的类可以一起工作**。
它就像**插头转换器**：墙上是美标插孔，你的设备是英标插头，中间加一个适配器，就能无痛使用。

一、定义

适配器模式：**将一个类的接口转换为客户希望的另一个接口，使得原本由于接口不兼容而不能一起工作的类可以协同工作**。
它通常分为两种实现方式：
* 类适配器（Class Adapter）——通过继承来适配（使用多继承或接口继承）
* 对象适配器（Object Adapter）——通过组合来适配（更常用，更灵活）


二、优点

1. 提高复用性
可以复用已有的类，无需修改其源代码，就能在新系统中使用。

2. 灵活性高
对象适配器可以在运行时动态替换被适配对象。

3. 解耦
客户端与被适配类之间通过适配器解耦，减少直接依赖。

4. 开放封闭原则
不修改原有类的前提下，扩展功能。

三、缺点

1. 增加复杂度
引入额外的适配器层，可能让系统结构更复杂。

2. 性能开销
多了一层调用，可能带来微小的性能损耗（通常可以忽略）。
3. 过度使用会混乱
如果系统中到处都是适配器，可能说明架构设计需要重构。

四、适用场景
1. 旧系统升级
新系统需要使用旧模块，但旧模块接口不匹配。

2. 第三方库集成
接入第三方 SDK 或 API，但其接口和你的系统不一致。

3. 多版本兼容
不同版本接口格式不一样，通过适配器实现统一调用。

4. 跨平台开发
不同平台下提供的 API 不同，通过适配器统一接口。


Case
代码解析

在这个实现中，各个角色的对应关系如下：

* 目标接口（Target）：AudioPlayer 协议，定义了客户端期望的接口 playAudioWithFileName:
* 适配者（Adaptee）：FLACPlayer 类，它有自己的接口 startFLACPlaybackWithFile:，与目标接口不兼容
* 适配器（Adapter）：FLACAdapter 类，实现了 AudioPlayer 协议，并持有一个 FLACPlayer 实例，在实现 playAudioWithFileName: 方法时，内部调用了 FLACPlayer 的 startFLACPlaybackWithFile: 方法
* 客户端：testAdapterModeMain 函数中的代码，通过 AudioPlayer 接口统一操作不同的播放器，无需关心具体实现

